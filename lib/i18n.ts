/**
 * Simple i18n dictionary for TR/EN. Keys are shared; values are per locale.
 */

export type Locale = "en" | "tr";

export const defaultLocale: Locale = "en";

export const translations: Record<Locale, Record<string, string>> = {
  en: {
    // App & Nav
    "app.title": "OpenSugar – Blood Glucose Tracker",
    "dashboard.title": "OpenSugar",
    "dashboard.subtitle": "Blood glucose & medication tracker",
    "add.title": "Add Entry",
    "add.subtitle": "Log glucose or medication",
    "add.glucoseCard": "Glucose reading",
    "add.medicationCard": "Medication log",
    "add.medicationCardHint": "Log when you took a medication",
    "add.typeFasting": "Fasting",
    "add.typeAfterMeal": "After Meal",
    "add.typeBedtime": "Bedtime",
    "add.typeOther": "Other",
    "nav.dashboard": "Dashboard",
    "nav.addEntry": "Add Entry",
    "nav.medications": "Medications",
    "nav.lab": "Lab",
    "nav.report": "Report",
    "nav.signOut": "Sign out",

    // Lab page
    "lab.title": "Blood Lab Results",
    "lab.subtitle": "HbA1c, cholesterol, blood pressure",
    "lab.addResult": "Add lab result",
    "lab.history": "History",
    "lab.noResults": "No lab results yet. Add one above.",
    "lab.hba1cProgression": "HbA1c progression",
    "lab.hba1cProgressionHint": "3–6 month trend (target often <7%)",
    "lab.saveLabResult": "Save lab result",
    "lab.saving": "Saving…",
    "lab.saved": "Saved.",
    "lab.testDate": "Test date",
    "lab.enterOneMetric": "Enter at least one metric. Leave others blank.",
    "lab.detailedAnalysis": "Detailed analysis",
    "lab.comparativeAnalysis": "Comparative analysis",
    "lab.summaryTitle": "Summary",
    "lab.uploadViewOld": "Upload / view past results",
    "lab.uploadLabReport": "Upload Lab Report",
    "lab.uploading": "Processing…",
    "lab.uploadSuccess": "Lab report uploaded and saved.",
    "lab.uploadSuccessCount": "Saved {{count}} lab values from the report.",
    "lab.uploadError": "Failed to process PDF.",
    "lab.uploadErrorNoFile": "Please select a PDF file.",
    "lab.uploadErrorNotPdf": "Only PDF files are allowed.",
    "lab.uploadErrorTooBig": "File is too large (max 10 MB).",
    "lab.uploadChooseFile": "Choose a PDF file",
    "lab.uploadHint": "PDF lab reports only. We extract Glucose, HbA1c, HDL, LDL, Triglycerides, BP.",

    // Lab form labels
    "lab.hba1c": "HbA1c (%)",
    "lab.hdl": "HDL (mg/dL)",
    "lab.ldl": "LDL (mg/dL)",
    "lab.triglycerides": "Triglycerides (mg/dL)",
    "lab.bpSystolic": "BP systolic (mmHg)",
    "lab.bpDiastolic": "BP diastolic (mmHg)",
    "lab.hba1cPlaceholder": "e.g. 6.5",
    "lab.hdlPlaceholder": "e.g. 55",
    "lab.ldlPlaceholder": "e.g. 100",
    "lab.trigPlaceholder": "e.g. 120",
    "lab.bpPlaceholder": "e.g. 120",

    // Lab table
    "lab.date": "Date",
    "lab.test": "Test",
    "lab.value": "Value",
    "lab.unit": "Unit",

    // Lab analysis
    "lab.good": "Good",
    "lab.attention": "Attention",
    "lab.high": "High",
    "lab.low": "Low",
    "lab.improved": "Improved",
    "lab.worsened": "Worsened",
    "lab.unchanged": "Unchanged",
    "lab.target": "Trend",
    "lab.prev": "Previous",
    "lab.latest": "Latest",

    // Report
    "report.title": "Doctor's Report",
    "report.subtitle": "Glucose, medications, lab results & Time-in-Range",
    "report.exportPdf": "Export to PDF",
    "report.exporting": "Exporting…",
    "report.bloodLabResults": "Blood lab results",
    "report.latestLabResults": "Latest blood lab results",
    "report.mostRecentPerTest": "Most recent value per test",
    "report.noLabData": "No lab data yet.",
    "report.timeInRange": "Time-in-Range summary",
    "report.tirHint": "% of readings in each zone (70–140 = healthy)",
    "report.hypo": "Below (<70)",
    "report.inRange": "In range (70–140)",
    "report.slightlyHigh": "Slightly high (141–180)",
    "report.high": "High (>180)",
    "report.noTirData": "No glucose data for TiR.",
    "report.combinedLog": "Combined log",
    "report.combinedLogHint": "Glucose readings and medication intake for clinician review",
    "report.dateTime": "Date & time",
    "report.type": "Type",
    "report.valueMedication": "Value / Medication",
    "report.notes": "Notes",
    "report.noData": "No data yet.",
    "report.glucose": "Glucose",
    "report.medication": "Medication",
    "report.comparativeLabSummary": "Comparative lab summary",

    // Chart
    "chart.hba1cTarget": "Dashed line: 7% (common target). 3–6 month view.",

    // Alerts (smart alerts)
    "alert.hypo": "Low blood sugar (hypoglycemia)",
    "alert.hypoDesc": "Seek immediate medical attention. Your reading is below 70 mg/dL (hypoglycemia).",
    "alert.hyper": "High blood sugar (hyperglycemia)",
    "alert.hyperDesc": "Your reading is above 180 mg/dL. Drink water and consult your doctor if this persists.",

    // Dashboard
    "dashboard.bloodGlucose": "Blood Glucose",
    "dashboard.lastUpdated": "Last updated {{text}}",
    "dashboard.noReadingsYet": "No readings yet",
    "dashboard.justNow": "just now",
    "dashboard.minutesAgo": "{{n}}m ago",
    "dashboard.hoursAgo": "{{n}}h ago",
    "dashboard.yesterday": "yesterday",
    "dashboard.daysAgo": "{{n}} days ago",
    "dashboard.today": "Today",
    "dashboard.todayHint": "Morning & evening at a glance",
    "dashboard.morning": "Morning",
    "dashboard.evening": "Evening",
    "dashboard.noReadingsTodayYet": "No readings today yet",
    "dashboard.addFirstReadingHint": "Add a reading to see your day at a glance",
    "dashboard.quickAdd": "Quick Add",
    "dashboard.quickAddHint": "Log a reading in one tap",
    "dashboard.save": "Save",
    "dashboard.enterValueBetween": "Enter a value between 0 and 999",
    "dashboard.low": "Low",
    "dashboard.normal": "Normal",
    "dashboard.inRange": "In range",
    "dashboard.slightlyHigh": "Slightly high",
    "dashboard.high": "High",
    "dashboard.lastReading": "Last Reading",
    "dashboard.history": "History",
    "dashboard.historyHint": "Date & time · Value · Type · Notes",
    "dashboard.noLogsYet": "No logs yet",
    "dashboard.addFirstReadingLink": "Add your first reading",
    "dashboard.dateTime": "Date & time",
    "dashboard.value": "Value",
    "dashboard.type": "Type",
    "dashboard.notes": "Notes",
    "dashboard.measurementType": "Measurement type",
    "dashboard.timeInRange": "Time in Range",
    "dashboard.tirSubtitle": "% of readings in each zone",
    "dashboard.hourlyDistribution": "Hourly distribution",
    "dashboard.hourlyDistributionHint": "Average glucose by hour",
    "dashboard.averages": "Averages",
    "dashboard.dailyAverage": "Daily average",
    "dashboard.sevenDayAverage": "7-day average",
    "dashboard.nextCheck": "Next Check",
    "dashboard.suggested": "Suggested",
    "dashboard.logToGetSuggestions": "Log a reading to get suggestions",

    // Add (glucose form)
    "add.measurementType": "Measurement type",
    "add.bloodGlucoseLabel": "Blood glucose (mg/dL)",
    "add.valuePlaceholder": "e.g. 98",
    "add.dateAndTime": "Date and time",
    "add.notesOptional": "Notes (optional)",
    "add.notesPlaceholder": "e.g. After breakfast",
    "add.saveReading": "Save reading",
    "add.saving": "Saving…",
    "add.saved": "Saved.",
    "add.highReadingTitle": "High reading",
    "add.highReadingDesc": "This value is above 180 mg/dL. Consider drinking water and consulting your care plan if this persists.",

    // Add medication log
    "add.medication": "Medication",
    "add.selectMedication": "Select medication",
    "add.addMedsFirst": "Add medications on the Medications page first.",
    "add.logMedication": "Log medication",
    "add.logged": "Logged.",
    "add.notesPlaceholderMeal": "e.g. With breakfast",

    // Medications form
    "med.name": "Name",
    "med.dosage": "Dosage",
    "med.unit": "Unit",
    "med.frequency": "Frequency",
    "med.placeholderName": "e.g. Metformin",
    "med.placeholderDosage": "e.g. 500",
    "med.select": "Select",
    "med.mg": "mg",
    "med.units": "units",
    "med.mcg": "mcg",
    "med.g": "g",
    "med.daily": "Daily",
    "med.twiceDaily": "Twice daily",
    "med.asNeeded": "As Needed",
    "med.withMeals": "With meals",
    "med.addMedication": "Add medication",
    "med.saving": "Saving…",
    "med.added": "Added.",

    // Login
    "login.title": "OpenSugar",
    "login.signIn": "Sign in",
    "login.username": "Username",
    "login.password": "Password",
    "login.errorMessage": "Sign-in failed. Check APP_USER and APP_PASSWORD in .env.local.",
    "login.envHint": "Set APP_USER and APP_PASSWORD in .env.local.",

    // Fab
    "fab.addNewEntry": "Add new entry",

    // Charts
    "chart.bloodGlucose": "Blood Glucose",
    "chart.movingAvg": "Moving avg",
    "chart.avgGlucose": "Avg glucose",
    "chart.avgMgDl": "Avg mg/dL",
    "chart.hourLabel": "Hour {{label}}",
    "chart.noHourlyData": "No data for hourly distribution",

    // Profile
    "profile.title": "Profile",
    "profile.close": "Close",
    "profile.language": "Language",

    // Report lab test names (short)
    "report.labHbA1c": "HbA1c",
    "report.labHdl": "HDL",
    "report.labLdl": "LDL",
    "report.labTriglycerides": "Triglycerides",
    "report.labBpSystolic": "BP (systolic)",
    "report.labBpDiastolic": "BP (diastolic)",
  },
  tr: {
    "app.title": "OpenSugar – Kan Şekeri Takip",
    "dashboard.title": "OpenSugar",
    "dashboard.subtitle": "Kan şekeri ve ilaç takibi",
    "add.title": "Kayıt Ekle",
    "add.subtitle": "Şeker veya ilaç girişi",
    "add.glucoseCard": "Şeker ölçümü",
    "add.medicationCard": "İlaç girişi",
    "add.medicationCardHint": "İlacı ne zaman aldığınızı girin",
    "add.typeFasting": "Açlık",
    "add.typeAfterMeal": "Yemek Sonrası",
    "add.typeBedtime": "Yatmadan Önce",
    "add.typeOther": "Diğer",
    "nav.dashboard": "Panel",
    "nav.addEntry": "Kayıt Ekle",
    "nav.medications": "İlaçlar",
    "nav.lab": "Laboratuvar",
    "nav.report": "Rapor",
    "nav.signOut": "Çıkış",

    "lab.title": "Kan Tahlil Sonuçları",
    "lab.subtitle": "HbA1c, kolesterol, tansiyon",
    "lab.addResult": "Tahlil sonucu ekle",
    "lab.history": "Geçmiş",
    "lab.noResults": "Henüz tahlil yok. Yukarıdan ekleyin.",
    "lab.hba1cProgression": "HbA1c seyri",
    "lab.hba1cProgressionHint": "3–6 aylık trend (hedef genelde %7 altı)",
    "lab.saveLabResult": "Kaydet",
    "lab.saving": "Kaydediliyor…",
    "lab.saved": "Kaydedildi.",
    "lab.testDate": "Tahlil tarihi",
    "lab.enterOneMetric": "En az bir değer girin. Diğerlerini boş bırakabilirsiniz.",
    "lab.detailedAnalysis": "Detaylı analiz",
    "lab.comparativeAnalysis": "Karşılaştırmalı analiz",
    "lab.summaryTitle": "Özet",
    "lab.uploadViewOld": "Eski sonuçları ekle / görüntüle",
    "lab.uploadLabReport": "Tahlil Raporu Yükle",
    "lab.uploading": "İşleniyor…",
    "lab.uploadSuccess": "Tahlil raporu yüklendi ve kaydedildi.",
    "lab.uploadSuccessCount": "Rapordan {{count}} değer kaydedildi.",
    "lab.uploadError": "PDF işlenemedi.",
    "lab.uploadErrorNoFile": "Lütfen bir PDF dosyası seçin.",
    "lab.uploadErrorNotPdf": "Sadece PDF dosyaları kabul edilir.",
    "lab.uploadErrorTooBig": "Dosya çok büyük (en fazla 10 MB).",
    "lab.uploadChooseFile": "PDF dosyası seçin",
    "lab.uploadHint": "Sadece tahlil raporu PDF'leri. Glukoz, HbA1c, HDL, LDL, Trigliserid, Tansiyon çıkarılır.",

    "lab.hba1c": "HbA1c (%)",
    "lab.hdl": "HDL (mg/dL)",
    "lab.ldl": "LDL (mg/dL)",
    "lab.triglycerides": "Trigliserid (mg/dL)",
    "lab.bpSystolic": "Tansiyon sistolik (mmHg)",
    "lab.bpDiastolic": "Tansiyon diastolik (mmHg)",
    "lab.hba1cPlaceholder": "örn. 6.5",
    "lab.hdlPlaceholder": "örn. 55",
    "lab.ldlPlaceholder": "örn. 100",
    "lab.trigPlaceholder": "örn. 120",
    "lab.bpPlaceholder": "örn. 120",

    "lab.date": "Tarih",
    "lab.test": "Test",
    "lab.value": "Değer",
    "lab.unit": "Birim",

    "lab.good": "İyi",
    "lab.attention": "Dikkat",
    "lab.high": "Yüksek",
    "lab.low": "Düşük",
    "lab.improved": "İyileşti",
    "lab.worsened": "Kötüleşti",
    "lab.unchanged": "Değişmedi",
    "lab.target": "Trend",
    "lab.prev": "Önceki",
    "lab.latest": "Son",

    "report.title": "Doktor Raporu",
    "report.subtitle": "Şeker, ilaçlar, tahliller ve hedef aralık",
    "report.exportPdf": "PDF indir",
    "report.exporting": "İndiriliyor…",
    "report.bloodLabResults": "Kan tahlilleri",
    "report.latestLabResults": "Son kan tahlilleri",
    "report.mostRecentPerTest": "Test başına en son değer",
    "report.noLabData": "Henüz tahlil yok.",
    "report.timeInRange": "Hedef aralık özeti",
    "report.tirHint": "Ölçümlerin % dağılımı (70–140 = sağlıklı)",
    "report.hypo": "Düşük (<70)",
    "report.inRange": "Aralıkta (70–140)",
    "report.slightlyHigh": "Biraz yüksek (141–180)",
    "report.high": "Yüksek (>180)",
    "report.noTirData": "TiR için şeker verisi yok.",
    "report.combinedLog": "Birleşik kayıt",
    "report.combinedLogHint": "Klinisyen incelemesi için şeker ve ilaç kayıtları",
    "report.dateTime": "Tarih ve saat",
    "report.type": "Tür",
    "report.valueMedication": "Değer / İlaç",
    "report.notes": "Notlar",
    "report.noData": "Henüz veri yok.",
    "report.glucose": "Şeker",
    "report.medication": "İlaç",
    "report.comparativeLabSummary": "Karşılaştırmalı tahlil özeti",

    "chart.hba1cTarget": "Kesik çizgi: %7 (yaygın hedef). 3–6 ay görünümü.",

    "alert.hypo": "Düşük kan şekeri (hipoglisemi)",
    "alert.hypoDesc": "Acil tıbbi yardım alın. Ölçüm 70 mg/dL altında (hipoglisemi).",
    "alert.hyper": "Yüksek kan şekeri (hiperglisemi)",
    "alert.hyperDesc": "Ölçüm 180 mg/dL üzerinde. Su için ve sürerse doktorunuza danışın.",

    "dashboard.bloodGlucose": "Kan Şekeri",
    "dashboard.lastUpdated": "Son güncelleme {{text}}",
    "dashboard.noReadingsYet": "Henüz ölçüm yok",
    "dashboard.justNow": "az önce",
    "dashboard.minutesAgo": "{{n}} dk önce",
    "dashboard.hoursAgo": "{{n}} sa önce",
    "dashboard.yesterday": "dün",
    "dashboard.daysAgo": "{{n}} gün önce",
    "dashboard.today": "Bugün",
    "dashboard.todayHint": "Sabah ve akşam özeti",
    "dashboard.morning": "Sabah",
    "dashboard.evening": "Akşam",
    "dashboard.noReadingsTodayYet": "Bugün henüz ölçüm yok",
    "dashboard.addFirstReadingHint": "Günü görmek için bir ölçüm ekleyin",
    "dashboard.quickAdd": "Hızlı Ekle",
    "dashboard.quickAddHint": "Tek dokunuşla ölçüm kaydet",
    "dashboard.save": "Kaydet",
    "dashboard.enterValueBetween": "0 ile 999 arasında bir değer girin",
    "dashboard.low": "Düşük",
    "dashboard.normal": "Normal",
    "dashboard.inRange": "Aralıkta",
    "dashboard.slightlyHigh": "Biraz yüksek",
    "dashboard.high": "Yüksek",
    "dashboard.lastReading": "Son Ölçüm",
    "dashboard.history": "Geçmiş",
    "dashboard.historyHint": "Tarih · Değer · Tür · Notlar",
    "dashboard.noLogsYet": "Henüz kayıt yok",
    "dashboard.addFirstReadingLink": "İlk ölçümünüzü ekleyin",
    "dashboard.dateTime": "Tarih ve saat",
    "dashboard.value": "Değer",
    "dashboard.type": "Tür",
    "dashboard.notes": "Notlar",
    "dashboard.measurementType": "Ölçüm türü",
    "dashboard.timeInRange": "Hedef aralık",
    "dashboard.tirSubtitle": "Ölçümlerin bölgelere göre % dağılımı",
    "dashboard.hourlyDistribution": "Saatlik dağılım",
    "dashboard.hourlyDistributionHint": "Saate göre ortalama şeker",
    "dashboard.averages": "Ortalamalar",
    "dashboard.dailyAverage": "Günlük ortalama",
    "dashboard.sevenDayAverage": "7 günlük ortalama",
    "dashboard.nextCheck": "Sonraki Ölçüm",
    "dashboard.suggested": "Önerilen",
    "dashboard.logToGetSuggestions": "Öneri için bir ölçüm girin",

    "add.measurementType": "Ölçüm türü",
    "add.bloodGlucoseLabel": "Kan şekeri (mg/dL)",
    "add.valuePlaceholder": "örn. 98",
    "add.dateAndTime": "Tarih ve saat",
    "add.notesOptional": "Not (isteğe bağlı)",
    "add.notesPlaceholder": "örn. Kahvaltıdan sonra",
    "add.saveReading": "Kaydet",
    "add.saving": "Kaydediliyor…",
    "add.saved": "Kaydedildi.",
    "add.highReadingTitle": "Yüksek ölçüm",
    "add.highReadingDesc": "Bu değer 180 mg/dL üzerinde. Su içmeyi ve sürerse tedavi planınızı gözden geçirmeyi düşünün.",

    "add.medication": "İlaç",
    "add.selectMedication": "İlaç seçin",
    "add.addMedsFirst": "Önce İlaçlar sayfasından ilaç ekleyin.",
    "add.logMedication": "İlaç kaydet",
    "add.logged": "Kaydedildi.",
    "add.notesPlaceholderMeal": "örn. Kahvaltıyla",

    "med.name": "İlaç adı",
    "med.dosage": "Doz",
    "med.unit": "Birim",
    "med.frequency": "Sıklık",
    "med.placeholderName": "örn. Metformin",
    "med.placeholderDosage": "örn. 500",
    "med.select": "Seçin",
    "med.mg": "mg",
    "med.units": "birim",
    "med.mcg": "mcg",
    "med.g": "g",
    "med.daily": "Günde bir",
    "med.twiceDaily": "Günde iki kez",
    "med.asNeeded": "İhtiyaç halinde",
    "med.withMeals": "Yemeklerle",
    "med.addMedication": "İlaç ekle",
    "med.saving": "Kaydediliyor…",
    "med.added": "Eklendi.",

    "login.title": "OpenSugar",
    "login.signIn": "Giriş yap",
    "login.username": "Kullanıcı adı",
    "login.password": "Şifre",
    "login.errorMessage": "Giriş başarısız. .env.local içinde APP_USER ve APP_PASSWORD değerlerini kontrol edin.",
    "login.envHint": ".env.local dosyasında APP_USER ve APP_PASSWORD ayarlayın.",

    "fab.addNewEntry": "Yeni kayıt ekle",

    "chart.bloodGlucose": "Kan Şekeri",
    "chart.movingAvg": "Hareketli ort.",
    "chart.avgGlucose": "Ort. şeker",
    "chart.avgMgDl": "Ort. mg/dL",
    "chart.hourLabel": "Saat {{label}}",
    "chart.noHourlyData": "Saatlik dağılım için veri yok",

    "profile.title": "Profil",
    "profile.close": "Kapat",
    "profile.language": "Dil",

    "report.labHbA1c": "HbA1c",
    "report.labHdl": "HDL",
    "report.labLdl": "LDL",
    "report.labTriglycerides": "Trigliserid",
    "report.labBpSystolic": "Tansiyon (sistolik)",
    "report.labBpDiastolic": "Tansiyon (diastolik)",
  },
};

const STORAGE_KEY = "opensugar-locale";

export function getStoredLocale(): Locale {
  if (typeof window === "undefined") return defaultLocale;
  try {
    const v = localStorage.getItem(STORAGE_KEY);
    if (v === "tr" || v === "en") return v;
  } catch {}
  return defaultLocale;
}

export function setStoredLocale(locale: Locale): void {
  try {
    localStorage.setItem(STORAGE_KEY, locale);
  } catch {}
}

export function t(locale: Locale, key: string): string {
  return translations[locale]?.[key] ?? translations.en[key] ?? key;
}
